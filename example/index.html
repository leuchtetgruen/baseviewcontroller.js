<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<!--Load jquery, underscore and backbone-->
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>

	<!--Load baseviewcontroller-->
	<link href="../baseviewcontroller.css" rel="stylesheet">
	<script type="text/javascript" src="../baseviewcontroller.js"></script>
	<script type="text/javascript" src="../basemodel.js"></script>

	<style type="text/css">
		body {
			font-family: Sans-Serif;
			background-color: #f2f2f2;
		}
	</style>

    <title>BaseViewController test</title>
</head>
<body>
	<!--screen divs-->
	<div id="screen1" class="screen">
		Attention! You need to run this with a browser that enables local XMLHttpRequests!
		If you see this you're propably not doing it.
	</div>
	<div id="screen2" class="screen"></div>
        
	<script type="text/javascript">
				//ViewControllers for the two screens that switch
				var PlusModel = BaseModel.extend({
									initialize : function() {
										this.on("change:a", this.add);
										this.on("change:b", this.add);
									},
									add : function(noJSON) {
										this.set("result", parseInt(this.get("a")) + parseInt(this.get("b"))); 
									},
								});
				var ScreenOneVC = BaseViewController.extend({
								//TODO for you - try opacity or left as transition
								transition : "fold-top",

								events : {
									'click #showOtherScreen' : 'showOtherScreen'
								},

								initialize : function() {
									this.model = new PlusModel();
									this.render();
								},

								render : function() {
										var that = this;
										this._render('templates/screen.html', {nr : "1"});
								},

								doneRendering : function(data) {
										console.log("Screen 1 was rendered");

										that.model.bindView("a", that.operandA);
										that.model.bindView("b", that.operandB);
										that.model.bindView("result", that.result);
										that.operandB.bindTo(that.bval);
								},


								showOtherScreen : function(e) {
										this.hide();
										screen2 = new ScreenTwoVC({ el : $('#screen2')});
										e.preventDefault();
								}
				});

				var ScreenTwoVC = BaseViewController.extend({
								//TODO for you - try opacity or left as transition
								transition : "left",

								events : {
									'click #showOtherScreen' : 'showOtherScreen'
								},

								initialize : function() {
									this.render();
								},

								render : function() {
										this._render('templates/screen.html', {nr : "2"}, function(data) {
												console.log("Screen 2 was rendered");
										});
								},

								showOtherScreen : function(e) {
										this.hide();
										screen1 = new ScreenOneVC({ el : $('#screen1')});
										e.preventDefault();
								}

				});

				screen1 = new ScreenOneVC({ el : $('#screen1')});
	
	</script>
</body>
</html>
